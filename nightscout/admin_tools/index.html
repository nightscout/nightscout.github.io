<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Tools &mdash; Nightscout Documentation  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/NS-logo.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Closed loop systems" href="../close_loop/" />
    <link rel="prev" title="Nightscout Security and Privacy" href="../security/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../" class="icon icon-home">
            Nightscout Documentation
              <img src="../../_static/we are not waiting vertical.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../uploader/uploaders/">Supported Uploaders</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CREATE YOUR NIGHTSCOUT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../new_user/">New Nightscout Users</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CREATE YOUR DATABASE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/">Choose your database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/mongodb/atlas/">MongoDB Atlas Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/railway/database/">Railway Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/northflank/database/">Northflank Database</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CREATE YOUR WEB APP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../platform/">Choose your platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/azure/new_user/">Nightscout in Azure (Docker)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/northflank/new_user/">Nightscout in Northflank</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/render/new_user/">Nightscout in Render</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/railway/new_user/">Nightscout in Railway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/new_user/">Nightscout in Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/fly.io/new_user/">Nightscout in Fly.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/google/new_user/">Nightscout in Google Cloud</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SETUP NIGHTSCOUT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../profile_editor/">Setup your Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploader/setup/">Setup Uploaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloaders/">Setup Downloaders - Followers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wearable/">Nightscout on your Watch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup_variables/">Nightscout Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploader/xdripcarelink/">xDrip+ for CareLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/dexcom_bridge/">Troubleshoot Dexcom Share</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">USE NIGHTSCOUT</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../discover/">Discover your Nightscout site</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reports/">Create Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/">Nightscout Security and Privacy</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Admin Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subjects-and-roles">Subjects and Roles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#roles">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-token">Create a Token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#database-maintenance">Database Maintenance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mongo-status-database">Mongo <code class="docutils literal notranslate"><span class="pre">status</span></code> Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mongo-treatments-database">Mongo <code class="docutils literal notranslate"><span class="pre">treatments</span></code> Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mongo-entries-database">Mongo <code class="docutils literal notranslate"><span class="pre">entries</span></code> Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-future-items-from-database">Remove future items from Database</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../close_loop/">Closed loop systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifttt/">IFTTT Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pushover/">Remote notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/troubleshoot/">Troubleshooting Nightscout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/update/">Update Nightscout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/dev_branch/">Deploy another version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/downgrade/">Downgrade Nightscout</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ADVANCED DIY</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/">Advanced Nightscout deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/VPS/ubuntu/">Building Nightscout in Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/VPS/docker/">Building Nightscout with Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/NAS/synology/">Nightscout in your Synology NAS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VENDORS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/migrate/">Migration?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multiadmin/">Multiple sites and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/github/update/">Update GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/redeploy/">Redeploy with GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/github/">Troubleshoot GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/atlas/">Troubleshoot MongoDB Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/azure/">Troubleshoot Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/northflank/">Troubleshoot Northflank</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/railway/">Troubleshoot Railway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/heroku/">Troubleshoot Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/ecoplan/">Heroku Eco plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/hobbyplan/">Heroku Basic plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/mfa/">Heroku MFA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/upd_stack/">Update the Heroku stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/fly.io/">Troubleshoot Fly.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/render/">Troubleshoot Render</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLINICIANS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../clinicians/home/">Nightscout for clinicians</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../clinicians/setup/">Setup the main view</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../clinicians/reports/">Nightscout reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TRANSLATE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translate/">Google Translate links</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Nightscout Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Admin Tools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nightscout/admin_tools.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="admin-tools">
<h1>Admin Tools<a class="headerlink" href="#admin-tools" title="Permalink to this heading"></a></h1>
</br>
<section id="subjects-and-roles">
<h2>Subjects and Roles<a class="headerlink" href="#subjects-and-roles" title="Permalink to this heading"></a></h2>
<p><em><strong>Note: authentication tokens are also called access tokens</strong></em></p>
<div class="admonition-changing-api-secret admonition">
<p class="admonition-title">Changing API_SECRET</p>
<p>If you change your <a class="reference internal" href="../setup_variables/#api-secret"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">API_SECRET</span></code></span></a> all your tokens will change. Make sure you update your devices and send the new token link to those you allowed to access your Nightscout</p>
</div>
<p>To access the Authentication options, click the settings panel (three horizontal bars in the top right) in your website and select Admin Tools. The Authentication options are at the top of the Admin page. (Note: you must be logged in with your <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">SECRET</span></code> to access these tools.)</p>
<a class="reference internal image-reference" href="../../_images/Admin04.png"><img alt="../../_images/Admin04.png" src="../../_images/Admin04.png" style="width: 300px;" /></a>
</br>
<p>You will see several predefined roles:</p>
<a class="reference internal image-reference" href="../../_images/Admin01.png"><img alt="../../_images/Admin01.png" src="../../_images/Admin01.png" style="width: 700px;" /></a>
</br>
<section id="roles">
<h3>Roles<a class="headerlink" href="#roles" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">admin</span></code></strong>: full access</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">careportal</span></code></strong>: can view the site and make CarePortal/treatment entries</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readable</span></code></strong>: read-only access; no ability to make CarePortal/treatment entries. This user CAN see reports and profile information.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">denied</span></code></strong>: no access (this role only works if the <code class="docutils literal notranslate"><span class="pre">AUTH_DEFAULT_ROLES</span></code> setting is also <code class="docutils literal notranslate"><span class="pre">denied</span></code>. You can’t have a site that is readable to everyone and create a “denied” token for a specific user.)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">devicestatus-upload</span></code></strong>: used by devices</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>There is currently no way to limit a user so that he cannot view the Reports section if he has access to the site. Time/date-based roles are not currently possible.</p>
</div>
</br>
</section>
<section id="create-a-token">
<h3>Create a Token<a class="headerlink" href="#create-a-token" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Click the “Add New Subject” button.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/Admin00.png"><img alt="../../_images/Admin00.png" src="../../_images/Admin00.png" style="width: 700px;" /></a>
</br>
<ul class="simple">
<li><p>Fill in the name of the subject and the “role” you are giving this subject (from the list of roles shown above). Note you should only grant the <code class="docutils literal notranslate"><span class="pre">readable</span></code> role for users who do not need to save or edit data in Nightscout. For example, you might want to share the site to a school nurse, but not have him able edit the data.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/Admin05.png"><img alt="../../_images/Admin05.png" src="../../_images/Admin05.png" style="width: 600px;" /></a>
<ul class="simple">
<li><p>An <code class="docutils literal notranslate"><span class="pre">admin</span></code> token is necessary for AAPS to upload using the API V3.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/Admin05b.png"><img alt="../../_images/Admin05b.png" src="../../_images/Admin05b.png" style="width: 300px;" /></a>
</br>
<ul class="simple">
<li><p>Click save.</p></li>
<li><p>The token will be shown. You can use it in two different ways:</p>
<ul>
<li><p>Copy the token URL (right-click on it in the browser and select the option to copy the link address) and provide it to the user (e.g., paste it into an email). If the user enters the entire URL (with token), the token will be in effect.</p></li>
<li><p>Copy the token string (in the example below <code class="docutils literal notranslate"><span class="pre">school-a595d5f0aeff64c0</span></code>) and use it for authentication at site opening, instead of the API secret (Nightscout minimum version 14.1.0 required).</p></li>
</ul>
</li>
</ul>
<a class="reference internal image-reference" href="../../_images/Admin06.png"><img alt="../../_images/Admin06.png" src="../../_images/Admin06.png" style="width: 700px;" /></a>
</br>
<p>You can also add the token to the site URL to authenticate using a token. Your site link with token will look like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">https://yoursitename.yourplatform.com/?token=school-a595d5f0aeff64c0</span></code></p>
<p>Anybody with this link can use your Nightscout with the role defined for this token.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If the user copies only your core URL into a browser, and your site is readable by default, the token will be bypassed. (Possible strategies to ensure the user puts the role-based URL into a browser include using a <a class="reference external" href="https://tinyur.com/app">tinyurl</a> or <a class="reference external" href="https://bitly.com">bit.ly</a>.)</p>
</div>
<ul class="simple">
<li><p>You can edit a subject by clicking the edit icon, making changes, and saving.</p></li>
<li><p>You can delete a subject by clicking the red <strong><code class="docutils literal notranslate"><span class="pre">X</span></code></strong> icon to remove the subject from the list.</p></li>
</ul>
<p>See <a class="reference internal" href="../downloaders/"><span class="doc std std-doc">how to setup your downloaders (followers)</span></a> with a secured site.</p>
</br>
</br>
</section>
</section>
<section id="database-maintenance">
<h2>Database Maintenance<a class="headerlink" href="#database-maintenance" title="Permalink to this heading"></a></h2>
<p>If you use a small or a free database (like MongoDB Atlas), it will require maintenance as nothing in Nightscout is setup to perform cleanup and unless you planned for a larger size database, it will eventually fill-up.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure you leave <a class="reference internal" href="../setup_variables/#dbsize-database-size"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">dbsize</span></code></span></a> visible on your page to keep it under control.</p>
</div>
</br>
<p>This panel will give access to basic maintenance actions on various database collections.</p>
</br>
<section id="mongo-status-database">
<h3>Mongo <code class="docutils literal notranslate"><span class="pre">status</span></code> Database<a class="headerlink" href="#mongo-status-database" title="Permalink to this heading"></a></h3>
</br>
<p>Your status database contains battery, pump, … extra information as those defined in <a class="reference internal" href="../setup_variables/#devicestatus-device-status"><span class="std std-ref">devicestatus</span></a> that you can safely delete when necessary.</p>
<a class="reference internal image-reference" href="../../_images/Admin07.png"><img alt="../../_images/Admin07.png" src="../../_images/Admin07.png" style="width: 800px;" /></a>
</br>
<p>When it comes to <code class="docutils literal notranslate"><span class="pre">treatments</span></code> and <code class="docutils literal notranslate"><span class="pre">entries</span></code>, deleting data is something you need to carefully evaluate if you like Nightscout to be the main repository for your history.</p>
</section>
<section id="mongo-treatments-database">
<h3>Mongo <code class="docutils literal notranslate"><span class="pre">treatments</span></code> Database<a class="headerlink" href="#mongo-treatments-database" title="Permalink to this heading"></a></h3>
</br>
<a class="reference internal image-reference" href="../../_images/Admin08.png"><img alt="../../_images/Admin08.png" src="../../_images/Admin08.png" style="width: 800px;" /></a>
</br>
</section>
<section id="mongo-entries-database">
<h3>Mongo <code class="docutils literal notranslate"><span class="pre">entries</span></code> Database<a class="headerlink" href="#mongo-entries-database" title="Permalink to this heading"></a></h3>
</br>
<a class="reference internal image-reference" href="../../_images/Admin09.png"><img alt="../../_images/Admin09.png" src="../../_images/Admin09.png" style="width: 800px;" /></a>
</br>
</section>
<section id="remove-future-items-from-database">
<h3>Remove future items from Database<a class="headerlink" href="#remove-future-items-from-database" title="Permalink to this heading"></a></h3>
</br>
<p>Future treatments and entries generated by an incorrect time zone, daylight saving time change, or any other mistake can completely block your site. Using this feature will purge the database of these unwanted values automatically. Detected issues will appear in <code class="docutils literal notranslate"><span class="pre">Database</span> <span class="pre">contains</span> </code><em><code class="docutils literal notranslate"><span class="pre">x</span></code></em><code class="docutils literal notranslate"> <span class="pre">future</span> <span class="pre">records</span></code> and should be fixed.</p>
</br>
<a class="reference internal image-reference" href="../../_images/Admin10.png"><img alt="../../_images/Admin10.png" src="../../_images/Admin10.png" style="width: 800px;" /></a>
</br>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, #WeAreNotWaiting.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>