<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Nightscout Documentation  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/NS-logo.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../" class="icon icon-home">
            Nightscout Documentation
              <img src="../../_static/we are not waiting vertical.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../uploader/uploaders/">Supported Uploaders</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CREATE YOUR NIGHTSCOUT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/new_user/">New Nightscout Users</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CREATE YOUR DATABASE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/database/">Choose your database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/mongodb/atlas/">MongoDB Atlas Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/railway/database/">Railway Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/northflank/database/">Northflank Database</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CREATE YOUR WEB APP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/platform/">Choose your platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/azure/new_user/">Nightscout in Azure (Docker)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/northflank/new_user/">Nightscout in Northflank</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/render/new_user/">Nightscout in Render</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/railway/new_user/">Nightscout in Railway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/new_user/">Nightscout in Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/fly.io/new_user/">Nightscout in Fly.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/google/new_user/">Nightscout in Google Cloud</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SETUP NIGHTSCOUT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/profile_editor/">Setup your Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploader/setup/">Setup Uploaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/downloaders/">Setup Downloaders - Followers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/wearable/">Nightscout on your Watch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/setup_variables/">Nightscout Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploader/xdripcarelink/">xDrip+ for CareLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/dexcom_bridge/">Troubleshoot Dexcom Share</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">USE NIGHTSCOUT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/discover/">Discover your Nightscout site</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/reports/">Create Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/security/">Nightscout Security and Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/admin_tools/">Admin Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/close_loop/">Closed loop systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/ifttt/">IFTTT Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/pushover/">Remote notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/troubleshoot/">Troubleshooting Nightscout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/update/">Update Nightscout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/dev_branch/">Deploy another version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/downgrade/">Downgrade Nightscout</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ADVANCED DIY</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/advanced/">Advanced Nightscout deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/VPS/ubuntu/">Building Nightscout in Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/VPS/docker/">Building Nightscout with Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/NAS/synology/">Nightscout in your Synology NAS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VENDORS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/migrate/">Migration?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nightscout/multiadmin/">Multiple sites and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/github/update/">Update GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/redeploy/">Redeploy with GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/github/">Troubleshoot GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/atlas/">Troubleshoot MongoDB Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/azure/">Troubleshoot Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/northflank/">Troubleshoot Northflank</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/railway/">Troubleshoot Railway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/heroku/">Troubleshoot Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/ecoplan/">Heroku Eco plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/hobbyplan/">Heroku Basic plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vendors/heroku/mfa/">Heroku MFA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../update/upd_stack/">Update the Heroku stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/fly.io/">Troubleshoot Fly.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/render/">Troubleshoot Render</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLINICIANS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../clinicians/home/">Nightscout for clinicians</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../clinicians/setup/">Setup the main view</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../clinicians/reports/">Nightscout reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TRANSLATE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translate/">Google Translate links</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Nightscout Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/pages/configure/index.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Historical pages</p>
</div>
  <head>
    <title>Auto Configure Nightscout?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <style type="text/css">
    </style>
  </head>
  <body>
    <div id="workflow" class="container">
      <form id="inputs" action="#" method="GET" class="form-inline" role="form">
        <legend><h1>How do we configure Nightscout?</h1></legend>
        <div role="tabpanel">
          <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="">
              <a href="#MQTT" aria-controls="MQTT" role=tab" data-toggle="tab">MQTT</a>
            </li>
            <li role="presentation" class="active">
              <a href="#REST_APIs" aria-controls="REST" role=tab" data-toggle="tab">REST API</a>
            </li>
            <li role="presentation" class="">
              <a href="#MONGODB" aria-controls="MONGO" role=tab" data-toggle="tab">MONGO</a>
            </li>
            <li role="presentation" class="">
              <a href="#WebApp" aria-controls="WebApp" role=tab" data-toggle="tab">WebApp</a>
            </li>
          </ul>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane" id="MQTT">
              <fieldset id="mqtt_apis" class="values has-feedback">
                <legend></legend>
                <h3>Step 1: Sign up for an account at CloudMQTT</h3>
                <p><a href="http://cloudmqtt.com">Click here</a> to sign up and create your MQTT server</p> 
                <h3>Step 2: Enter your MQTT server information below
              </fieldset>
              <fieldset class="mqtt-values mqtt-creds container">
                <div class="column form-group has-error has-feedback">
                  <label class="mqtt-host control-label"><tt>MQTT Host:</tt>
                    <input type="text" name="host" class="v host form-control"
                      placeholder="m01.cloudmqtt.com" />
                    <span class="icon glyphicon glyphicon-question-sign form-control-feedback"></span>
                  </label>
                  <span class="hide glyphicon glyphicon-ok form-control-feedback"></span>
                </div>
                <div class="column form-group has-error has-feedback">
                  <label><tt>Port:</tt>
                  <input type="text" name="port" class="v port form-control"
                    placeholder="12424" />
                  </label>
                </div>
                <div class="row">
                <div class="column form-group has-error has-feedback">
                  <label><tt>Username:</tt>
                    <input type="text" name="user" class="v user form-control"
                      placeholder="user"/>
                  </label>
                </div>
                <div class="column form-group has-error has-feedback">
                  <label><tt>Password:</tt>
                  <input type="password" name="pass" class="v pass form-control"
                    placeholder="passw0rd" />
                  </label>
                </div>
                </div>
              </fieldset>
            </div>
            <div role="tabpanel" class="tab-pane active" id="REST_APIs">
              <fieldset id="rest_api" class="values has-feedback">
                <legend>REST API
                  <button class="btn" id="add_rest">
                    <span class="glyphicon glyphicon-plus"></span>
                  </button>
                </legend>
                <h3>Enter your API_SECRET and REST API URL below.</h3>
                <p>Your API_SECRET must be 12 characters or more</p>
                <p>Your REST API URL format should be https://foobar.azurewebsites.net/api/v1</p>
                <p>Change foobar to your personal site name, and don't forget to add /api/v1 to the end of the URL.</p>
                <div class="hide template skeleton rest">
                  <div class="form-group has-error has-feedback" title="If set must be at least 12 characters long.">
                    <label class="restsecret control-label"><tt>API_SECRET:</tt>
                      <input type="text" name="api_secret" class="v api_secret form-control"
                        placeholder="atleast12characterslong" />
                      <span class="icon glyphicon glyphicon-question-sign form-control-feedback"></span>
                    </label>
                    <span class="hide glyphicon glyphicon-ok form-control-feedback"></span>
                  </div>
                  <br/>
                  <div class="form-group has-error has-feedback">
                    <label class="restlocation control-label"><tt>REST API URL:</tt>
                      <input type="text" name="resturi" class="v resturi form-control"
                        placeholder="https://foobar.azurewebsites.net/api/v1" />
                      <span class="icon glyphicon glyphicon-question-sign form-control-feedback"></span>
                    </label>
                    <span class="hide glyphicon glyphicon-ok form-control-feedback"></span>
                  </div>
                </div>
              </fieldset>
            </div>
            <div role="tabpanel" class="tab-pane" id="MONGODB">
          <fieldset id="stage1" class="values has-feedback">
            <legend></legend>
            <h3>Step 1: Sign up for a Mongolab account and create a database</h3>
            <p>
            Detailed instructions are available at <a href="http://www.nightscout.info/wiki/welcome/configuring-the-data-backend" target="_blank">nightscout.info</a>.  If you already have a Mongo database for Nightscout, skip this step.
            </p>
            <h3>Step 2: Enter your Mongo server, port and database name</h3>
            <p>For example: ds012345.mongolab.com:12345/databasename</p>
            <div class="form-group has-error has-feedback">
              <label class="mongolocation control-label">Mongo server, port, and db:
                <input type="text" name="netloc" class="v netloc form-control"
                  placeholder="ds012345.mongolab.com:12345/cgmdb" />
                <span class="icon glyphicon glyphicon-question-sign form-control-feedback"></span>
              </label>
              <span class="hide glyphicon glyphicon-ok form-control-feedback"></span>
            </div>
          </fieldset>
          <fieldset id="stage2" class="values has-feedback">
            <h3>Step 3: Enter the db username and password for your database</h3>
            <legend></legend>
            <div class="form-group has-error has-feedback">
              <label><tt>Username:</tt>
                <input type="text" name="user" class="v user form-control"
                  placeholder="user"/>
              </label>
            </div>
            <div class="form-group has-error has-feedback">
              <label><tt>Password:</tt>
              <input type="password" name="pass" class="v pass form-control"
                placeholder="passw0rd" />
              </label>
            </div>
          </fieldset>
        <fieldset id="finish" class="values">
          <p>
          </p>
          <input type="disabled" disabled="disabled" name="prefix" class="v prefix" value="mongodb://"/>
          <input type="text" name="user" class="v user"
            placeholder="user"/>
          <tt class="v interstitial">:</tt>
          <input type="password" name="pass" class="v pass"
            placeholder="passw0rd" />
          <tt class="v interstitial">@</tt>
          <input type="text" name="hostname" class="v hostname"
            placeholder="hostname:port" />
          <tt class="v interstitial">/</tt>
          <input type="text" name="db" class="v db"
            placeholder="db" />
          <button type="button" class="btn btn-primary btn-lg format" name="format"
              value="format">Format</button>
          <button type="reset" class="btn btn-warning reset clear" name="clear"
              value="Clear">Clear</button>
        </fieldset>
            </div>
            <div role="tabpanel" class="tab-pane" id="WebApp">
              <table id="web_config">
                <tr>
                  <th colspan="3">
                    <h3>Required</h3>
                  </th>
                </tr>
                <tr>
                  <td>
                  <code>MONGO_CONNECTION</code>
                  </td>
                  <td>
                    <code class="env var mongo"></code>
                  </td>
                  <td> <tt>Custom</tt>
                  </td>
                </tr>
                <tr>
                  <th colspan="3">
                    <h3>Required for REST API </h3>
                  </th>
                </tr>
                <tr>
                  <td>
                  <code>API_SECRET</code>
                  </td>
                  <td>
                    <code class="env var api_secret"></code>
                  </td>
                  <td> <tt>Custom</tt>
                  </td>
                </tr>
              </table>
              <div class="well">
              </div>
            </div>
          </div>
        </div>
      </form>
      <div id="output" class="jumbotron">
        <p>
          <tt id="uri"></tt>
        </p>
        <div id="qrcode"> </div>
        <pre id="json"></pre>
      </div>
    </div>
    <div id="dependencies">
      <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js">
      </script>
      <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js">
      </script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    </div>
    <div id="js">
      <!-- Latest compiled and minified JavaScript -->
      <script type="text/javascript">
        function do_format (ev) {
          var base = $(ev.data.base);
          var parts = base.find('#finish .v');
          var out = [ ];
          if ($(ev.target).is('.reset')) {
            console.log('CLEAR');
            base.find(':input').not(':disabled').val('');
          }
          base.trigger('render');
          // base.find(ev.data.uri).text(uri);
          // base.find(ev.data.qrcode).empty( ).qrcode(uri);
        }
        function get_data (opts) {
          var base = $(opts.base);
          var parts = base.find('#finish .v');
          var out = [ ];
          parts.each(function iter (i) {
            var v = $(this);
            var r = '';
            if (v.is(':input') && v.val && v.val.call) {
              r = v.val( );
            } else {
              r = v.text( );
            }
            out.push(r.trim( ));
          });
          var uri = out.join('').trim( );
          var apis = get_rest_uris(opts);
          var mqtt = get_mqtt_uri(opts);
          var data = {
            mongo: { uri: uri }
          , rest: { endpoint: apis }
          };
          if (mqtt != 'ssl://:@:') {
            data.mqtt = { uri: mqtt };
          }
          if (data.mongo.uri == 'mongodb://:@/') {
            delete data.mongo;
          }
          if (!apis.length > 0) {
            delete data.rest;
          }
          return data;
        }
        function valid_rest_uri (i, v) {
            var el = $(this);
            var secret = el.find('.v.api_secret').val( );
            var url = el.find('.v.resturi').val( );
            var sep = '://';
            var parts = url.split(sep);
            var netloc = parts.pop( );
            var scheme = parts.pop( );
            if (scheme && netloc && parts.length === 0) {
              if (secret.length > 11) {
                el.find('.form-group.has-feedback .restsecret')
                  .find('.glyphicon-question-sign')
                  .removeClass('glyphicon-question-sign')
                  .addClass('glyphicon-ok');
                if (scheme.indexOf('http') === 0) {
                  el.find('.form-group.has-feedback')
                    .removeClass('has-error').addClass('has-success');
                  el.find('.form-group.has-feedback .restlocation')
                    .find('.glyphicon-question-sign')
                    .removeClass('glyphicon-question-sign')
                    .addClass('glyphicon-ok');
                  url = [ scheme, sep, encodeURIComponent(secret), '@', netloc ].join('');
                  return url;
                }
              }
            }
        }
        function get_rest_uris (opts) {
          var base = $(opts.base);
          var uris = base.find('#rest_api .rest.template')
            .not('.skeleton')
            .map(valid_rest_uri);
          return uris.get( );
        }
        function get_mqtt_uri (opts) {
          var base = $(opts.base);
          var controls = base.find('#MQTT');
          var prefix = 'ssl://'
          var host = controls.find('.v.host').val( );
          var user = controls.find('.v.user').val( );
          var pass = controls.find('.v.pass').val( );
          var port = controls.find('.v.port').val( );
          var uri = [ prefix, [user, pass].join(':')
                    , '@', [host, port].join(':') ].join('');
          return uri;
        }
        function render (ev) {
          var base = $(ev.data.base);
          var conf = get_data(ev.data);
          if ($(ev.target).is('.reset')) {
            console.log('CLEAR');
            base.find(':input').not(':disabled').val('');
          }
          if (conf.mongo && conf.mongo.uri) {
            base.find(ev.data.uri).text(conf.mongo.uri);
            base.find('.env.var.mongo').text(conf.mongo.uri)
          }
          if (conf.rest && conf.rest.endpoint) {
            var api_secret = base.find('.template').not('.skeleton').filter(':first').find('.v.api_secret:first').val( );
            base.find('.env.var.api_secret').text(api_secret)
          }
          base.find(ev.data.qrcode).empty( ).qrcode(JSON.stringify(conf));
          base.find('#json').text(JSON.stringify(conf));
        }
        var config = {
          base: '#workflow'
        , inputs: '#inputs'
        , output: '#output'
        , uri: '#output #uri'
        , qrcode: '#qrcode'
        };
        function stage1 (ev) {
          var dbFound = false;
          var base = $(ev.data.base);
          if (ev.type == 'keyup') {
            switch (ev.which) {
              case 46: // '.'
              case 47: // '/'
              case 58: // ':'
                dbFound = true;
                base.find("#stage1 .form-group.has-feedback")
                  .removeClass("has-error")
                  .addClass("has-warning");
              default:
                break;
            }
          }
          var target = $(ev.target);
          var netloc = $(ev.target).val( ).trim( ).split('/');
          if (netloc.length > 0) {
            var host = (netloc.shift( ) || '').trim( );
            var db = (netloc.pop( ) || '').trim( );
            var finish = base.find('#finish');
            finish.find('INPUT.v.hostname').val(host);
            finish.find('INPUT.v.db').val(db);
            if (db.length >=  2) {
              base.trigger('stage1');
              base.find("#stage1 .form-group.has-feedback")
                .removeClass("has-error has-warning")
                .addClass("has-success")
                ;
              base.find("#stage1 .form-group.has-feedback .mongolocation")
                .removeClass('glyphicon-question-sign')
                .addClass('glyphicon-ok')
                ;
            }
          }
          base.trigger('render');
          // finish.trigger('change');
        }
        function stage2 (ev) {
          var target = $(ev.target);
          var base = $(ev.data.base);
          var finish = base.find('#finish');
          var stage = base.find('#stage2');
          finish.find('INPUT.v.user').val(stage.find('INPUT.v.user').val( ));
          finish.find('INPUT.v.pass').val(stage.find('INPUT.v.pass').val( ));
          target.closest('.form-group.has-feedback')
              .removeClass('has-warning')
              .removeClass('has-error')
              .addClass('has-success')
              ;
          base.trigger('render');
        }
        function clone_rest_api (opts) {
          var base = $(opts.base);
          var container = base.find('#rest_api');
          var clone = container.find('.skeleton.template.rest').clone(true)
            .removeClass('skeleton')
            .removeClass('hide');
          container.append(clone);
          return clone;
        }
        function add_rest (ev) {
          clone_rest_api(ev.data);
        }
        function cancel (ev) {
          ev.preventDefault( );
          return false;
        }
        function prep_mqtt (ev) {
          var base = $(ev.data.base);
          var uri = get_mqtt_uri(ev.data);
          console.log('rendering', uri);
          base.trigger('render');
          var pieces = uri.split('@');
          var tail = pieces.pop( );
          var head = pieces.pop( );
          console.log('one', pieces);
          if (tail && head && pieces.length == 0) {
            pieces = head.split(':')
            var pass = pieces.pop( );
            var user = pieces.pop( );
            var scheme = pieces.pop( );
            console.log('two', pieces);
            if (user.length > 2 && pass.length > 0 && scheme == 'tcp' && pieces.length == 0) {
              pieces = tail.split(':');
              var port = pieces.pop( );
              var host = pieces.pop( );
              console.log('three', pieces);
              if (pieces.length == 0 && port.length > 0 && host.length > 0) {
                console.log('four', pieces);
                base.find('#MQTT .glygphicon-question-sign')
                  .removeClass('glygphicon-question-sign')
                  .addClass('glygphicon-ok')
                  ;
                base.find('#MQTT .has-feedback')
                  .removeClass('has-error has-warning')
                  .addClass('has-success')
                  ;
              }
            }
          }
        }
        function init (ev) {
          $(config.base).on('change keyup', '#stage1', ev.data, stage1);
          $(config.base).on('change keyup', '#stage2', ev.data, stage2);
          $(config.base).on('change keyup', '#MQTT', ev.data, prep_mqtt);
          $(config.base).on('change keyup', ev.data, do_format);
          $(config.base).on('render', ev.data, render);
          $(config.base + ' button.btn').on('click', ev.data, do_format);
          clone_rest_api(ev.data);
          // console.log('hello');
          do_format.apply(this, arguments);
          $(config.base).on('click', '#add_rest', ev.data, add_rest);
          $(config.base).on('submit', 'FORM', ev.data, cancel);
        }
        $(document).on('ready', config, init);
      </script>
    </div>
  </body>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, #WeAreNotWaiting.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>